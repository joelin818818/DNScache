# 🌐 DNS缓存工具 🚀

这是一个用Python编写的DNS缓存工具，它能够从一个初始域名开始，递归地收集相关域名，并通过查询DNS来加快您的DNS服务器缓存。✨

## ✅ 功能

- 🔍 从一个起始域名开始，递归收集多达2000个不同域名（可在配置中调整）
- 💾 自动保存收集到的域名到JSON文件
- 📂 支持使用已保存的域名文件进行DNS查询
- ⚡ 支持多线程DNS查询以加快速度
- 🛡️ DNS查询速率限制（每秒最多12次），避免触发DNS服务器限制
- 📊 支持导出DNS查询结果为JSON或CSV格式
- 📥 支持从外部文件导入域名列表
- 🔎 增强的域名提取能力，支持从JavaScript、CSS等资源中提取域名
- ⚙️ 可自定义配置文件，调整查询速率、线程数等参数
- 🚀 内置性能测试工具，可帮助找出最佳参数设置

## 📥 安装

1. 确保您已安装Python 3.6或更高版本 🐍
2. 克隆或下载此仓库 📦
3. 安装依赖:

```bash
pip install -r requirements.txt
```

## 🎮 使用方法

运行程序:

```bash
python dns_cache_tool.py
```

程序提供以下选项:

1. **从新域名开始收集** 🔍: 输入一个起始域名，程序将从该域名开始，递归查找并访问相关域名（访问过程中系统会自动进行DNS解析）
2. **使用已有域名文件查询DNS** 🔎: 选择之前保存的域名文件，对文件中的所有域名进行纯DNS查询（不访问网页内容）
3. **导入域名列表** 📥: 从外部文件导入域名列表（支持JSON和CSV格式）
4. **导出上次查询结果** 📤: 将上次查询的DNS结果导出为JSON或CSV格式
5. **配置设置** ⚙️: 修改程序的配置设置
6. **运行性能测试** 🚀: 测试不同参数组合的性能，找出最佳配置
7. **退出** 👋: 退出程序

## 🔧 工作原理

1. 🏁 程序从用户指定的初始域名开始
2. 🌐 访问域名页面（此过程中系统自动进行DNS解析），并获取页面上的所有链接
3. 🔗 从这些链接中提取新的域名，并添加到待访问队列
4. 🔄 重复此过程，直到收集到设定数量的不同域名（默认2000个）或待访问队列为空
5. 📝 收集到的域名将保存到JSON文件中
6. 🚀 "使用已有域名文件查询DNS"功能可对已收集的域名进行纯DNS查询（不访问网页），加快DNS服务器缓存

## 🛠️ 配置文件

程序使用`config.ini`文件存储配置，包括以下部分：

- **General**: 基本设置，如目标域名数量(默认2000)和数据目录
- **DNS**: DNS查询相关配置，如每秒查询次数(默认12)、超时时间等
- **Crawler**: 网页抓取相关配置，如是否提取JavaScript、CSS中的域名等
- **Export**: 导出相关设置，如默认导出格式等

您可以通过主菜单的"配置设置"选项来修改这些设置。

## ⚠️ 注意事项

- 📁 程序会创建一个名为`data`的目录来存储域名文件和导出的结果
- 🧵 程序使用多线程进行域名收集和DNS查询，但限制并发度，以控制查询速率
- ⏱️ 实现了DNS查询速率限制机制，避免触发DNS服务器的限制
- 📊 批量DNS查询时，程序会显示进度百分比和成功率
- 🔍 增强的域名提取功能可以从JavaScript文件、CSS文件、meta标签等多种来源提取域名
- 💽 保存的域名文件可能包含DNS解析信息，便于后续分析
- 🧪 性能测试功能可帮助找出适合您系统和网络环境的最佳参数设置

## 🙏 感谢使用

希望这个小工具能帮助你加速DNS解析体验！有任何问题或建议，欢迎反馈哦～ 😊 
